<template>
  <div class="cell-menu-div">
    <div class="edit-line-div flex-bettween" v-show="moveShow">
      <div class="left-move-button" @click="moveRow('right')">&lt;右移动</div>
      <div class="right-move-button" @click="moveRow('left')">左移动&gt;</div>
    </div>
    <div class="edit-line-div">
      <div class="example-div" :style="{color:fontColorValue,backgroundColor:bgColorValue,fontSize:fontSizeValue+'px'}">样式参考</div>
    </div>
    <div class="edit-line-div">
      <span class="label-text-span">文字大小</span>
      <input type="text" class="input-style" v-model="fontSizeValue"/>
    </div>
    <div class="edit-line-div">
      <span class="label-text-span">文字颜色</span>
      <input type="color" class="input-style" v-model="fontColorValue"/>
    </div>
    <div class="edit-line-div">
      <span class="label-text-span">背景色</span>
      <input type="color" class="input-style" v-model="bgColorValue"/>
    </div>
    <div class="edit-line-div flex-arround position-bottom">
      <button class="button-style" @click="uploadData">确认</button>
      <button class="button-style" @click="hideMenuPop">取消</button>
    </div>
  </div>
</template>

<script>
    export default {
        name: "cell-pop-menu",
      props:["menuData"],
      data(){
        return {
          fontSizeValue:"16",
          fontColorValue:"#2c3e50",
          bgColorValue:"#ffffff",
          cellData:null,
          moveShow:false
        }
      },
      beforeMount:function () {
        var tempData = this.menuData.allData;

        if(this.menuData.title == "title"){
          for(var i=0;i<tempData.length;i++){
            if(tempData[i].field == this.menuData.field){
              this.cellData = tempData[i];
              break;
            }
          }
        }else if(this.menuData.title == "content"){
          this.cellData = this.menuData.allData[this.menuData.rowIndex][this.menuData.field];
        }

        if(!this.cellData){
          this.hideMenuPop();
          return false;
        }

        if(this.cellData.isMove && this.menuData.title == "title"){
          this.moveShow = true;
        }else{
          this.moveShow = false;
        }

        if(this.cellData.cellStyle){
          var cellStyle = this.cellData.cellStyle;
          if(cellStyle.fontSize){
            this.fontSizeValue = cellStyle.fontSize;
          }
          if(cellStyle.fontColor){
            this.fontColorValue = cellStyle.fontColor;
          }
          if(cellStyle.bgColor){
            this.bgColorValue = cellStyle.bgColor;
          }
        }


      },
      methods:{
        //移动方法
        moveRow:function (direction) {
          var tempData = {
            direction:direction
          }
          this.$emit('menuPopcallBack',"moveRow",tempData);
        },
        //样式修改方法
        uploadData:function () {

          var tempData = {
            fontSize:this.fontSizeValue,
            fontColor:this.fontColorValue,
            bgColor:this.bgColorValue
          }

          this.$emit('menuPopcallBack',"changeStyle",tempData);

        },
        //因此menu pop 方法
        hideMenuPop:function () {
          var tempData = {};
          this.$emit('menuPopcallBack',"hide",tempData)
        }
      }
    }
</script>

<style scoped>
  .cell-menu-div{
    background-color: white;
    box-shadow: 0 0px 5px 1px #666666;
    position: absolute;
    height: 200px;
    width: 200px;
    padding: 10px;
    box-sizing: border-box;
    border-radius: 4px;
  }
  .input-style{
    font-size: 14px;
    color: #666666;
    font-weight: 600;
    width: 40px;
    height: 20px;
    text-align: center;
    border:1px solid #cccccc;
    border-radius: 4px;
  }
  .label-text-span{
    font-size: 12px;
    color: #333333;
    display: inline-block;
    margin-right: 10px;
  }
  .edit-line-div{
    display: flex;
    justify-content: flex-start;
    align-items: center;
    padding: 3px 0;
  }
  .flex-bettween{
    justify-content: space-between;
  }
  .flex-arround{
    justify-content: space-around;
  }
  .left-move-button,
  .right-move-button{
    font-size: 14px;
    font-weight: 600;
    color: #666666;
    cursor: pointer;
  }
  .example-div{
    width: 100%;
    min-height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .button-style{
    height: 26px;
    width: 60px;
    border: 1px solid rgba(0,0,0,0);
    font-size: 14px;
    color: white;
    background-color: #30ccd7;
    cursor: pointer;
    border-radius: 4px;
  }
  .position-bottom{
    bottom: 10px;
    position: absolute;
    width: 180px;
  }
</style>
